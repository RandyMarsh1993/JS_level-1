{"version":3,"sources":["Board.js","Game.js","Main.js","Status.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../app.js","sourcesContent":["class Board {\r\n\tconstructor() {\r\n\t\tthis.gameTableElement = document.getElementById('game');\r\n\t}\r\n\r\n\tinit(game, status) {\r\n\t\tthis.game = game;\r\n\t\tthis.status = status;\r\n\t}\r\n\r\n\trenderMap() {\r\n\t\tfor (let row = 0; row < 3; row++) {\r\n\t\t\tconst tr = document.createElement('tr');\r\n\t\t\tthis.gameTableElement.appendChild(tr);\r\n\t\t\tfor (let col = 0; col < 3; col++) {\r\n\t\t\t\tlet td = document.createElement('td');\r\n\t\t\t\ttd.dataset.row = row.toString();\r\n\t\t\t\ttd.dataset.col = col.toString();\r\n\t\t\t\ttr.appendChild(td);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitEventHandlers() {\r\n\t\tthis.gameTableElement.addEventListener('click', event => this.game.cellClickHandler(event));\r\n\t}\r\n\r\n\tfillCell(event) {\r\n\t\tlet row = +event.target.dataset.row;\r\n\t\tlet col = +event.target.dataset.col;\r\n\r\n\t\tthis.status.mapValues[row][col] = this.status.phase;\r\n\t\tevent.target.textContent = this.status.phase;\r\n\t}\r\n\r\n\tisClickByCell(event) {\r\n\t\treturn event.target.tagName === 'TD';\r\n\t}\r\n\r\n\tisCellEmpty(event) {\r\n\t\tlet row = +event.target.dataset.row;\r\n\t\tlet col = +event.target.dataset.col;\r\n\r\n\t\treturn this.status.mapValues[row][col] === '';\r\n\t}\r\n}","class Game {\r\n\r\n\tinit(status, board) {\r\n\t\tthis.status = status;\r\n\t\tthis.board = board;\r\n\t}\r\n\r\n\r\n\tcellClickHandler(event) {\r\n\t\tif (!this.isCorrectClick(event)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.board.fillCell(event);\r\n\t\tif (this.hasWon()) {\r\n\t\t\tthis.status.setStatusStopped();\r\n\t\t\tthis.sayWonPhrase();\r\n\t\t}\r\n\r\n\t\tthis.status.togglePhase();\r\n\t}\r\n\r\n\tisCorrectClick(event) {\r\n\t\treturn this.status.isStatusPlaying() && this.board.isClickByCell(event) && this.board.isCellEmpty(event);\r\n\t}\r\n\r\n\thasWon() {\r\n\t\treturn this.isLineWon({ x: 0, y: 0 }, { x: 1, y: 0 }, { x: 2, y: 0 }) ||\r\n\t\tthis.isLineWon({ x: 0, y: 1 }, { x: 1, y: 1 }, { x: 2, y: 1 }) ||\r\n\t\tthis.isLineWon({ x: 0, y: 2 }, { x: 1, y: 2 }, { x: 2, y: 2 }) ||\r\n\t\t\r\n\t\tthis.isLineWon({ x: 0, y: 0 }, { x: 0, y: 1 }, { x: 0, y: 2 }) ||\r\n\t\tthis.isLineWon({ x: 1, y: 0 }, { x: 1, y: 1 }, { x: 1, y: 2 }) ||\r\n\t\tthis.isLineWon({ x: 2, y: 0 }, { x: 2, y: 1 }, { x: 2, y: 2 }) ||\r\n\r\n\t\tthis.isLineWon({ x: 0, y: 0 }, { x: 1, y: 1 }, { x: 2, y: 2 }) ||\r\n\t\tthis.isLineWon({ x: 0, y: 2 }, { x: 1, y: 1 }, { x: 2, y: 0 });\r\n\t}\r\n\r\n\tisLineWon(a, b, c) {\r\n\t\tlet value = this.status.mapValues[a.y][a.x] + this.status.mapValues[b.y][b.x] + this.status.mapValues[c.y][c.x];\r\n\t\treturn value === 'XXX' || value === '000';\r\n\t}\r\n\r\n\tsayWonPhrase() {\r\n\t\tlet figure = this.status.phase === 'X' ? 'Крестики' : 'Нолики';\r\n\t\talert(`${figure} выиграли!`);\r\n\t}\r\n}","window.addEventListener('load', function() {\r\n\tconst game = new Game();\r\n\tconst board = new Board();\r\n\tconst status = new Status();\r\n\r\n\tboard.init(game, status);\r\n\tgame.init(status, board);\r\n\r\n\tboard.renderMap();\r\n\tboard.initEventHandlers();\r\n\r\n});","class Status {\r\n\tconstructor() {\r\n\t\tthis.status = 'playing';\r\n\t\tthis.mapValues = [\r\n\t\t\t['', '', ''],\r\n\t\t\t['', '', ''],\r\n\t\t\t['', '', ''],\r\n\t\t];\r\n\t\tthis.phase = 'X';\r\n\t}\r\n\r\n\tisStatusPlaying() {\r\n\t\treturn this.status === 'playing';\r\n\t}\r\n\r\n\tsetStatusStopped() {\r\n\t\tthis.status = 'stopped';\r\n\t}\r\n\r\n\ttogglePhase() {\r\n\t\tthis.phase = this.phase === 'X' ? '0' : 'X';\r\n\t}\r\n}"]}